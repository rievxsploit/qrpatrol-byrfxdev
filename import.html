<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Import Data Lokasi</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen p-4">
  <div class="bg-white p-6 rounded shadow-md w-full max-w-md">
    <h1 class="text-xl font-semibold mb-4 text-center">Import Lokasi ke Firestore</h1>
    <p class="text-sm text-gray-600 mb-4 text-center">Pastikan kamu sudah login terlebih dahulu sebelum menekan tombol ini.</p>
    <button onclick="importLocations()" class="bg-blue-600 hover:bg-blue-700 text-white w-full py-2 rounded-md">
      Import Semua Titik
    </button>
    <p id="status" class="mt-4 text-center text-green-600 font-medium hidden">Import selesai!</p>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  <script src="script/firebase-config.js"></script>

  <script>
    function importLocations() {
      const locations = {
        "POS-001": "Pos Security",
        "POS-002": "Kantor Depan",
        "POS-003": "Parkiran Motor",
        "POS-004": "Musholla",
        "POS-005": "Gudang Atas",
        "POS-006": "Ruang Dispatch",
        "POS-007": "Gudang Bawah",
        "POS-008": "Gudang Baru",
        "POS-009": "Pos Checker",
        "POS-010": "Area Pemuatan",
        "POS-011": "Gerbang Parkiran"
      };

      auth.onAuthStateChanged(user => {
        if (!user) {
          alert("Silakan login terlebih dahulu.");
          window.location.href = "login.html";
          return;
        }

        const promises = Object.entries(locations).map(([id, nama]) =>
          db.collection("locations").doc(id).set({ namaTitik: nama })
        );

        Promise.all(promises).then(() => {
          document.getElementById("status").classList.remove("hidden");
        });
      });
    }
  </script>
</body>
</html>
